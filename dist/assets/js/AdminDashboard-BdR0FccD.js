import{j as e,A as t,m as s}from"./animation-vendor-C-sx8lNG.js";import{r as a,u as r}from"./react-vendor-D9GwovZj.js";import{N as l}from"./Navbar-DOFmxQsm.js";import{A as i,c as d,d as n,e as o,F as c,T as x}from"./ui-vendor-BnGFDNMM.js";const h=()=>{const[h,m]=a.useState([]),[p,b]=a.useState(!0),[u,g]=a.useState(""),[j,w]=a.useState("all"),[f,N]=a.useState("all"),[v,y]=a.useState(null),k=r();a.useEffect(()=>{const e=localStorage.getItem("adminToken");e?fetch("/api/admin/submissions",{headers:{Authorization:`Bearer ${e}`}}).then(e=>{if(401===e.status||403===e.status)throw localStorage.removeItem("adminToken"),k("/admin/login"),new Error("Unauthorized");return e.json()}).then(e=>{m(e),b(!1)}).catch(e=>{b(!1)}):k("/admin/login")},[k]);const S=async(e,t)=>{const s=localStorage.getItem("adminToken");await fetch(`/api/admin/submissions/${e}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({status:t})}),m(s=>s.map(s=>s.id===e?{...s,status:t}:s)),v&&v.id===e&&y({...v,status:t})},C=h.filter(e=>{const t=(e.fullName||"").toLowerCase().includes(u.toLowerCase())||(e.email||"").toLowerCase().includes(u.toLowerCase())||(e.subject||"").toLowerCase().includes(u.toLowerCase()),s="all"===j||e.status===j,a="Welcome Popup Submission"===e.subject;return t&&s&&("all"===f||("consultations"===f?a:!a))}),z={total:h.length,new:h.filter(e=>"new"===e.status).length,responded:h.filter(e=>"replied"===e.status).length};return e.jsxs("div",{className:"min-h-screen bg-white text-black font-sans selection:bg-red-500/30 selection:text-white",children:[e.jsx(l,{}),e.jsxs("div",{className:"pt-32 pb-20 px-6 container mx-auto max-w-[1600px]",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-end mb-12 gap-6 border-b border-black/5 pb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-b from-black to-gray-700 mb-2",children:"Command Center"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Manage inquiries and client relationships."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[e.jsxs("div",{className:"bg-[#050505] metal-stroke rounded-[24px] p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm font-bold uppercase tracking-widest mb-2",children:"Total Inquiries"}),e.jsx("h3",{className:"text-5xl font-bold text-white",children:z.total})]}),e.jsx(i,{className:"text-red-500 opacity-50",size:32})]})]}),e.jsxs("div",{className:"bg-[#050505] metal-stroke rounded-[24px] p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-600/10 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm font-bold uppercase tracking-widest mb-2",children:"Pending Actions"}),e.jsx("h3",{className:"text-5xl font-bold text-white",children:z.new})]}),e.jsx(d,{className:"text-red-500",size:32})]})]}),e.jsxs("div",{className:"bg-[#050505] metal-stroke rounded-[24px] p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm font-bold uppercase tracking-widest mb-2",children:"Replied"}),e.jsx("h3",{className:"text-5xl font-bold text-white",children:z.responded})]}),e.jsx(n,{className:"text-red-500",size:32})]})]})]}),e.jsxs("div",{className:"flex gap-4 mb-8",children:[e.jsx("button",{onClick:()=>N("all"),className:"px-6 py-3 rounded-full text-sm font-bold transition-all "+("all"===f?"bg-black text-white":"bg-black/5 text-gray-500 border border-black/5 hover:text-black"),children:"All Inquiries"}),e.jsx("button",{onClick:()=>N("proposals"),className:"px-6 py-3 rounded-full text-sm font-bold transition-all "+("proposals"===f?"bg-black text-white":"bg-black/5 text-gray-500 border border-black/5 hover:text-black"),children:"Project Proposals"}),e.jsx("button",{onClick:()=>N("consultations"),className:"px-6 py-3 rounded-full text-sm font-bold transition-all "+("consultations"===f?"bg-red-600 text-white shadow-lg shadow-red-500/20":"bg-black/5 text-gray-500 border border-black/5 hover:text-black"),children:"Free Consultations"})]}),e.jsxs("div",{className:"bg-[#050505] border border-[#1a1a1a] rounded-t-[24px] border-b-0 p-4 flex flex-col md:flex-row gap-4 items-center justify-between z-20 relative",children:[e.jsxs("div",{className:"relative w-full md:w-96 group",children:[e.jsx(o,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-red-500 transition-colors",size:20}),e.jsx("input",{type:"text",placeholder:"Search database...",value:u,onChange:e=>g(e.target.value),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] rounded-xl pl-12 pr-4 py-3 text-white focus:outline-none focus:border-red-500 transition-all placeholder:text-gray-600"})]}),e.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:flex-none md:w-48",children:[e.jsxs("select",{value:j,onChange:e=>w(e.target.value),className:"w-full appearance-none bg-[#0a0a0a] border border-[#2a2a2a] rounded-xl pl-4 pr-10 py-3 text-white focus:outline-none focus:border-red-500 transition-all cursor-pointer",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"replied",children:"Replied"})]}),e.jsx(c,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none",size:16})]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("adminToken"),k("/admin/login")},className:"px-6 py-3 bg-red-600/10 text-red-500 border border-red-900/30 rounded-xl hover:bg-red-600 hover:text-white transition-all font-bold text-sm tracking-wide uppercase",children:"Logout System"})]})]}),e.jsx("div",{className:"bg-[#050505] border border-[#1a1a1a] rounded-b-[24px] border-t-0 overflow-hidden relative min-h-[500px]",children:e.jsx("div",{className:"overflow-x-auto relative z-10",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/5 bg-[#0a0a0a]",children:[e.jsx("th",{className:"p-6 font-medium text-gray-500 text-xs uppercase tracking-wider w-20",children:"ID"}),e.jsx("th",{className:"p-6 font-medium text-gray-500 text-xs uppercase tracking-wider",children:"Client Details"}),e.jsx("th",{className:"p-6 font-medium text-gray-500 text-xs uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"p-6 font-medium text-gray-500 text-xs uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"p-6 font-medium text-gray-500 text-xs uppercase tracking-wider",children:"Received"}),e.jsx("th",{className:"p-6 font-medium text-gray-500 text-xs uppercase tracking-wider text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:p?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"p-20 text-center text-gray-500",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mb-4"}),e.jsx("p",{children:"Syncing Database..."})]})}):0===C.length?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-20 text-center text-gray-500",children:"No records found matching your criteria."})}):C.map(t=>e.jsxs("tr",{onClick:()=>y(t),className:"group hover:bg-white/[0.02] transition-colors cursor-pointer",children:[e.jsxs("td",{className:"p-6 text-gray-600 font-mono text-xs",children:["#",t.id]}),e.jsxs("td",{className:"p-6",children:[e.jsx("div",{className:"font-bold text-white text-lg mb-1",children:t.fullName}),e.jsxs("div",{className:"text-sm text-gray-500 flex flex-col gap-0.5",children:[e.jsx("span",{children:t.email}),e.jsx("span",{children:t.phone})]})]}),e.jsx("td",{className:"p-6",children:e.jsx("span",{className:"text-gray-300 font-medium",children:t.subject})}),e.jsx("td",{className:"p-6",children:e.jsxs("div",{className:`\n                                                    inline-flex items-center px-3 py-1 rounded-full text-xs font-bold border\n                                                    ${"new"===t.status?"bg-red-500/10 text-red-500 border-red-500/20":"read"===t.status?"bg-white/5 text-gray-400 border-white/10":"bg-white/10 text-white border-white/20"}\n                                                `,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full mr-2 "+("new"===t.status?"bg-red-500":"read"===t.status?"bg-gray-500":"bg-white")}),t.status.toUpperCase()]})}),e.jsxs("td",{className:"p-6 text-gray-500 text-sm",children:[new Date(t.createdAt).toLocaleDateString(),e.jsx("span",{className:"block text-xs text-gray-600 mt-1",children:new Date(t.createdAt).toLocaleTimeString()})]}),e.jsx("td",{className:"p-6 text-right",children:e.jsx("button",{onClick:e=>{e.stopPropagation(),y(t)},className:"p-2 text-gray-400 hover:text-white bg-white/5 hover:bg-white/10 rounded-lg transition-colors border border-white/5",children:"View Details"})})]},t.id))})]})})})]}),e.jsx(t,{children:v&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center md:justify-end md:items-stretch",children:[e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/80",onClick:()=>y(null)}),e.jsxs(s.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"relative w-full md:w-[600px] h-full bg-[#050505] border-l border-white/10 shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-8 border-b border-white/10 flex justify-between items-start bg-[#0a0a0a]",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Inquiry Details"}),e.jsxs("span",{className:"text-gray-500 font-mono text-sm",children:["ID: #",v.id]})]}),e.jsx("button",{onClick:()=>y(null),className:"p-2 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors",children:"âœ•"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 space-y-6 md:space-y-8 min-h-0 scrollbar-thin scrollbar-track-transparent scrollbar-thumb-white/20 overscroll-contain",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-gray-800 to-black border border-white/10 flex items-center justify-center text-2xl font-bold text-gray-400",children:v.fullName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:v.fullName}),e.jsx("p",{className:"text-red-500",children:v.email})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white/5 rounded-xl border border-white/5",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider font-bold",children:"Contact"}),e.jsx("p",{className:"text-white mt-1 font-mono",children:v.phone})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-xl border border-white/5",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider font-bold",children:"Submitted"}),e.jsx("p",{className:"text-white mt-1",children:new Date(v.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"p-6 bg-white/5 rounded-xl border border-white/5",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider font-bold mb-2 block",children:"Subject"}),e.jsx("p",{className:"text-white text-lg font-medium",children:v.subject})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider font-bold mb-3 block",children:"Message Content"}),e.jsx("div",{className:"p-6 bg-[#0a0a0a] rounded-xl border border-white/10 text-gray-300 leading-relaxed whitespace-pre-wrap",children:v.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white/5 rounded-xl border border-white/5",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider font-bold",children:"Planned Budget"}),e.jsx("p",{className:"text-white mt-1 font-bold text-lg",children:v.budget||"N/A"})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-xl border border-white/5",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider font-bold",children:"Project Scope"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:v.projectScope?JSON.parse(v.projectScope).map(t=>e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded-md text-xs text-gray-300",children:t},t)):e.jsx("span",{className:"text-gray-500 text-sm",children:"Not specified"})})]})]})]})}),e.jsxs("div",{className:"p-8 border-t border-white/10 bg-[#0a0a0a] space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("button",{onClick:()=>S(v.id,"new"),className:"py-3 rounded-lg font-bold text-sm transition-colors "+("new"===v.status?"bg-red-600 text-white shadow-lg shadow-red-900/40":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"New"}),e.jsx("button",{onClick:()=>S(v.id,"read"),className:"py-3 rounded-lg font-bold text-sm transition-colors "+("read"===v.status?"bg-white/20 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Read"}),e.jsx("button",{onClick:()=>S(v.id,"replied"),className:"py-3 rounded-lg font-bold text-sm transition-colors "+("replied"===v.status?"bg-white text-black":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Replied"})]}),e.jsxs("button",{onClick:()=>(async e=>{if(window.confirm("Permanent delete? This action cannot be undone.")){const t=localStorage.getItem("adminToken");await fetch(`/api/admin/submissions/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),m(t=>t.filter(t=>t.id!==e)),(null==v?void 0:v.id)===e&&y(null)}})(v.id),className:"w-full py-4 flex items-center justify-center gap-2 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors font-medium",children:[e.jsx(x,{size:18})," Delete Record Properly"]})]})]})]})})]})};export{h as default};
